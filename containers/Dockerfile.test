# Syndicate CI Test Dockerfile

FROM syndicate-ci-base
MAINTAINER Zack Williams <zdw@cs.arizona.edu>

# Install Syndicate UG tools
RUN DEBIAN_FRONTEND=noninteractive apt-get update && apt-get install -y --force-yes\
    python-yaml \
    syndicate-ug-tools \
    syndicate-rg \
    syndicate-ag \
    syndicatefs \
    fuse \
    valgrind

# Join to the fuse group
RUN usermod -aG fuse syndicate

# Switch to being the syndicate user
USER syndicate

# Switch to /opt
WORKDIR /opt

# Run the tests
CMD [ "/bin/bash" ]
